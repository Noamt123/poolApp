<!DOCTYPE html>

<html lang="en">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

	<head>
		<meta charset="utf-8" name="FRC team 5945" content="Maple Lawn pool availablity">
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}" />
		<title>Maple Lawn pool active member modifyer</title>

	</head>

	<body>
		<h1>Pool availability administrator</h1>
		<br />
		<h2>This site is for Pool administrators only</h2>
		<br />
		<div id = "log" style="display: block">
			<div class="containter">
				<label for="pass"><b>Password</b></label>
				<input type="password" placeholder="Enter password..." name="pass" id="pass">
			</div>
			<button name="login" id="login" type="button" class="submbutton">Login</button>
		</div>
		<div id="stuff" style="display: none">
			<h2>Enter family into pool database</h2>
			<br />
			<h3>Enter in this format:</h3>
			<p>Lastname, address, can they enter the pool(0(no) or 1(yes))</p>
			<div>
				<input type="text" id="lname" placeholder="Last Name...">
				<input type="text" id="addre" placeholder="Address...">
				<input type="number" id="paydu" min=0 max=1>
			</div>
			<label for="passw">Enter the password so we can verify your identity</label>
			<input type="password" name="passw" id="passw" placeholder="Enter Password...">
			<button id="submit" type="button" class="submbutton">Add person</button> 
		</div>

	</body>
</html>

<script>
	$(document).ready(function(){
		$("#login").click(function(){
			var attempt = document.getElementById("pass").value;
			$.post("/pass1", attempt, function(data, status){
				if(data == "U_R_IN"){
					document.getElementById("log").style.display =  "none";
					document.getElementById("stuff").style.display  =  "block";
					alert("The password is correct.");
				}
			});
		})
		$("#submit").click(function(){
			var attempt = ("CuRUkhogic7YvKv0ak6oAJaH1g7uY8z2gA=="+document.getElementById("passw").value);
			var ln = document.getElementById("lname").value
			var ad = document.getElementById("addre").value
			var pa = document.getElementById("paydu").value
			var dat = {key: attempt, lname: ln, address: ad, pay: pa};
			$.ajax({
				type: "POST",
				url: "/register",
				data: JSON.stringify({key: attempt, lname: ln, address: ad, pay: pa}),
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				success: function(data){
					alert("Response is: "+data);
				}
			})
		})
	})
</script>